import{r as v,j as e,u as V,a as E,d as Z,b as ee,L as j,m as y,t as I}from"./index-CwdUw3Q8.js";const Q=(s,t,i,a)=>{s.style.transition=`${t} ${i}ms ${a}`},u=(s,t,i)=>Math.min(Math.max(s,t),i);class te{constructor(t,i){this.glareAngle=0,this.glareOpacity=0,this.calculateGlareSize=o=>{const{width:l,height:d}=o,h=Math.sqrt(l**2+d**2);return{width:h,height:h}},this.setSize=o=>{const l=this.calculateGlareSize(o);this.glareEl.style.width=`${l.width}px`,this.glareEl.style.height=`${l.height}px`},this.update=(o,l,d,h)=>{this.updateAngle(o,l.glareReverse),this.updateOpacity(o,l,d,h)},this.updateAngle=(o,l)=>{const{xPercentage:d,yPercentage:h}=o,m=180/Math.PI,p=d?Math.atan2(h,-d)*m:0;this.glareAngle=p-(l?180:0)},this.updateOpacity=(o,l,d,h)=>{const{xPercentage:m,yPercentage:p}=o,{glarePosition:A,glareReverse:P,glareMaxOpacity:M}=l,b=d?-1:1,w=h?-1:1,x=P?-1:1;let g=0;switch(A){case"top":g=-m*b*x;break;case"right":g=p*w*x;break;case"bottom":case void 0:g=m*b*x;break;case"left":g=-p*w*x;break;case"all":g=Math.hypot(m,p)}const N=u(g,0,100);this.glareOpacity=N*M/100},this.render=o=>{const{glareColor:l}=o;this.glareEl.style.transform=`rotate(${this.glareAngle}deg) translate(-50%, -50%)`,this.glareEl.style.opacity=this.glareOpacity.toString(),this.glareEl.style.background=`linear-gradient(0deg, rgba(255,255,255,0) 0%, ${l} 100%)`},this.glareWrapperEl=document.createElement("div"),this.glareEl=document.createElement("div"),this.glareWrapperEl.appendChild(this.glareEl),this.glareWrapperEl.className="glare-wrapper",this.glareEl.className="glare";const a={position:"absolute",top:"0",left:"0",width:"100%",height:"100%",overflow:"hidden",borderRadius:i,WebkitMaskImage:"-webkit-radial-gradient(white, black)",pointerEvents:"none"},n=this.calculateGlareSize(t),c={position:"absolute",top:"50%",left:"50%",transformOrigin:"0% 0%",pointerEvents:"none",width:`${n.width}px`,height:`${n.height}px`};Object.assign(this.glareWrapperEl.style,a),Object.assign(this.glareEl.style,c)}}class ie{constructor(){this.glareAngle=0,this.glareOpacity=0,this.tiltAngleX=0,this.tiltAngleY=0,this.tiltAngleXPercentage=0,this.tiltAngleYPercentage=0,this.update=(t,i)=>{this.updateTilt(t,i),this.updateTiltManualInput(t,i),this.updateTiltReverse(i),this.updateTiltLimits(i)},this.updateTilt=(t,i)=>{const{xPercentage:a,yPercentage:n}=t,{tiltMaxAngleX:c,tiltMaxAngleY:o}=i;this.tiltAngleX=a*c/100,this.tiltAngleY=n*o/100*-1},this.updateTiltManualInput=(t,i)=>{const{tiltAngleXManual:a,tiltAngleYManual:n,tiltMaxAngleX:c,tiltMaxAngleY:o}=i;(a!==null||n!==null)&&(this.tiltAngleX=a!==null?a:0,this.tiltAngleY=n!==null?n:0,t.xPercentage=100*this.tiltAngleX/c,t.yPercentage=100*this.tiltAngleY/o)},this.updateTiltReverse=t=>{const i=t.tiltReverse?-1:1;this.tiltAngleX=i*this.tiltAngleX,this.tiltAngleY=i*this.tiltAngleY},this.updateTiltLimits=t=>{const{tiltAxis:i}=t;this.tiltAngleX=u(this.tiltAngleX,-90,90),this.tiltAngleY=u(this.tiltAngleY,-90,90),i&&(this.tiltAngleX=i==="x"?this.tiltAngleX:0,this.tiltAngleY=i==="y"?this.tiltAngleY:0)},this.updateTiltAnglesPercentage=t=>{const{tiltMaxAngleX:i,tiltMaxAngleY:a}=t;this.tiltAngleXPercentage=this.tiltAngleX/i*100,this.tiltAngleYPercentage=this.tiltAngleY/a*100},this.render=t=>{t.style.transform+=`rotateX(${this.tiltAngleX}deg) rotateY(${this.tiltAngleY}deg) `}}}const se={scale:1,perspective:1e3,flipVertically:!1,flipHorizontally:!1,reset:!0,transitionEasing:"cubic-bezier(.03,.98,.52,.99)",transitionSpeed:400,trackOnWindow:!1,gyroscope:!1,tiltEnable:!0,tiltReverse:!1,tiltAngleXInitial:0,tiltAngleYInitial:0,tiltMaxAngleX:20,tiltMaxAngleY:20,tiltAxis:void 0,tiltAngleXManual:null,tiltAngleYManual:null,glareEnable:!1,glareMaxOpacity:.7,glareColor:"#ffffff",glarePosition:"bottom",glareReverse:!1,glareBorderRadius:"0"};class K extends v.PureComponent{constructor(){super(...arguments),this.wrapperEl={node:null,size:{width:0,height:0,left:0,top:0},clientPosition:{x:null,y:null,xPercentage:0,yPercentage:0},updateAnimationId:null,scale:1},this.tilt=null,this.glare=null,this.addDeviceOrientationEventListener=async()=>{if(!window.DeviceOrientationEvent)return;const t=DeviceOrientationEvent.requestPermission;typeof t=="function"?await t()==="granted"&&window.addEventListener("deviceorientation",this.onMove):window.addEventListener("deviceorientation",this.onMove)},this.setSize=()=>{this.setWrapperElSize(),this.glare&&this.glare.setSize(this.wrapperEl.size)},this.mainLoop=t=>{this.wrapperEl.updateAnimationId!==null&&cancelAnimationFrame(this.wrapperEl.updateAnimationId),this.processInput(t),this.update(t.type),this.wrapperEl.updateAnimationId=requestAnimationFrame(this.renderFrame)},this.onEnter=t=>{const{onEnter:i}=this.props;this.setSize(),this.wrapperEl.node.style.willChange="transform",this.setTransitions(),i&&i({event:t})},this.onMove=t=>{this.mainLoop(t),this.emitOnMove(t)},this.onLeave=t=>{const{onLeave:i}=this.props;if(this.setTransitions(),i&&i({event:t}),this.props.reset){const a=new CustomEvent("autoreset");this.onMove(a)}},this.processInput=t=>{const{scale:i}=this.props;switch(t.type){case"mousemove":this.wrapperEl.clientPosition.x=t.pageX,this.wrapperEl.clientPosition.y=t.pageY,this.wrapperEl.scale=i;break;case"touchmove":this.wrapperEl.clientPosition.x=t.touches[0].pageX,this.wrapperEl.clientPosition.y=t.touches[0].pageY,this.wrapperEl.scale=i;break;case"deviceorientation":this.processInputDeviceOrientation(t),this.wrapperEl.scale=i;break;case"autoreset":{const{tiltAngleXInitial:a,tiltAngleYInitial:n,tiltMaxAngleX:c,tiltMaxAngleY:o}=this.props,l=n/o*100;this.wrapperEl.clientPosition.xPercentage=u(a/c*100,-100,100),this.wrapperEl.clientPosition.yPercentage=u(l,-100,100),this.wrapperEl.scale=1;break}}},this.processInputDeviceOrientation=t=>{if(!t.gamma||!t.beta||!this.props.gyroscope)return;const{tiltMaxAngleX:i,tiltMaxAngleY:a}=this.props,n=t.gamma;this.wrapperEl.clientPosition.xPercentage=t.beta/i*100,this.wrapperEl.clientPosition.yPercentage=n/a*100,this.wrapperEl.clientPosition.xPercentage=u(this.wrapperEl.clientPosition.xPercentage,-100,100),this.wrapperEl.clientPosition.yPercentage=u(this.wrapperEl.clientPosition.yPercentage,-100,100)},this.update=t=>{const{tiltEnable:i,flipVertically:a,flipHorizontally:n}=this.props;t!=="autoreset"&&t!=="deviceorientation"&&t!=="propChange"&&this.updateClientInput(),i&&this.tilt.update(this.wrapperEl.clientPosition,this.props),this.updateFlip(),this.tilt.updateTiltAnglesPercentage(this.props),this.glare&&this.glare.update(this.wrapperEl.clientPosition,this.props,a,n)},this.updateClientInput=()=>{const{trackOnWindow:t}=this.props;let i,a;if(t){const{x:n,y:c}=this.wrapperEl.clientPosition;i=c/window.innerHeight*200-100,a=n/window.innerWidth*200-100}else{const{size:{width:n,height:c,left:o,top:l},clientPosition:{x:d,y:h}}=this.wrapperEl;i=(h-l)/c*200-100,a=(d-o)/n*200-100}this.wrapperEl.clientPosition.xPercentage=u(i,-100,100),this.wrapperEl.clientPosition.yPercentage=u(a,-100,100)},this.updateFlip=()=>{const{flipVertically:t,flipHorizontally:i}=this.props;t&&(this.tilt.tiltAngleX+=180,this.tilt.tiltAngleY*=-1),i&&(this.tilt.tiltAngleY+=180)},this.renderFrame=()=>{this.resetWrapperElTransform(),this.renderPerspective(),this.tilt.render(this.wrapperEl.node),this.renderScale(),this.glare&&this.glare.render(this.props)}}componentDidMount(){if(this.tilt=new ie,this.initGlare(),this.setSize(),this.addEventListeners(),typeof CustomEvent>"u")return;const t=new CustomEvent("autoreset");this.mainLoop(t);const i=new CustomEvent("initial");this.emitOnMove(i)}componentWillUnmount(){this.wrapperEl.updateAnimationId!==null&&cancelAnimationFrame(this.wrapperEl.updateAnimationId),this.removeEventListeners()}componentDidUpdate(){const t=new CustomEvent("propChange");this.mainLoop(t),this.emitOnMove(t)}addEventListeners(){const{trackOnWindow:t,gyroscope:i}=this.props;window.addEventListener("resize",this.setSize),t&&(window.addEventListener("mouseenter",this.onEnter),window.addEventListener("mousemove",this.onMove),window.addEventListener("mouseout",this.onLeave),window.addEventListener("touchstart",this.onEnter),window.addEventListener("touchmove",this.onMove),window.addEventListener("touchend",this.onLeave)),i&&this.addDeviceOrientationEventListener()}removeEventListeners(){const{trackOnWindow:t,gyroscope:i}=this.props;window.removeEventListener("resize",this.setSize),t&&(window.removeEventListener("mouseenter",this.onEnter),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseout",this.onLeave),window.removeEventListener("touchstart",this.onEnter),window.removeEventListener("touchmove",this.onMove),window.removeEventListener("touchend",this.onLeave)),i&&window.DeviceOrientationEvent&&window.removeEventListener("deviceorientation",this.onMove)}setWrapperElSize(){const t=this.wrapperEl.node.getBoundingClientRect();this.wrapperEl.size.width=this.wrapperEl.node.offsetWidth,this.wrapperEl.size.height=this.wrapperEl.node.offsetHeight,this.wrapperEl.size.left=t.left+window.scrollX,this.wrapperEl.size.top=t.top+window.scrollY}initGlare(){const{glareEnable:t,glareBorderRadius:i}=this.props;t&&(this.glare=new te(this.wrapperEl.size,i),this.wrapperEl.node.appendChild(this.glare.glareWrapperEl))}emitOnMove(t){const{onMove:i}=this.props;if(!i)return;let a=0,n=0;this.glare&&(a=this.glare.glareAngle,n=this.glare.glareOpacity),i({tiltAngleX:this.tilt.tiltAngleX,tiltAngleY:this.tilt.tiltAngleY,tiltAngleXPercentage:this.tilt.tiltAngleXPercentage,tiltAngleYPercentage:this.tilt.tiltAngleYPercentage,glareAngle:a,glareOpacity:n,event:t})}resetWrapperElTransform(){this.wrapperEl.node.style.transform=""}renderPerspective(){const{perspective:t}=this.props;this.wrapperEl.node.style.transform+=`perspective(${t}px) `}renderScale(){const{scale:t}=this.wrapperEl;this.wrapperEl.node.style.transform+=`scale3d(${t},${t},${t})`}setTransitions(){const{transitionSpeed:t,transitionEasing:i}=this.props;Q(this.wrapperEl.node,"all",t,i),this.glare&&Q(this.glare.glareEl,"opacity",t,i)}render(){const{children:t,className:i,style:a}=this.props;return e.jsx("div",{ref:n=>{this.wrapperEl.node=n},onMouseEnter:this.onEnter,onMouseMove:this.onMove,onMouseLeave:this.onLeave,onTouchStart:this.onEnter,onTouchMove:this.onMove,onTouchEnd:this.onLeave,className:i,style:a,children:t})}}K.defaultProps=se;function J(s,t=6,i=6){return s?s.length<=t+i?s:`${s.slice(0,t)}...${s.slice(-i)}`:""}function ae(){var g,N,L,C,O,S,Y,k,z,X,D,$,T,R,W,F,B;const s=V(E.users.getCurrentProfile),t=Z(E.users.updateProfile),i=ee(E.pdf.generateInvoicePDF),[a,n]=v.useState(!1),[c,o]=v.useState(!1),[l,d]=v.useState({firstName:"",lastName:"",phone:"",dateOfBirth:"",gender:"",address:"",emergencyContact:""}),[h,m]=v.useState(null),p=V(E.payments.listPayments,{userId:(g=s==null?void 0:s.profile)==null?void 0:g.userId});v.useEffect(()=>{var r,f,H,G,U,_,q;s&&d({firstName:((r=s.profile)==null?void 0:r.firstName)||"",lastName:((f=s.profile)==null?void 0:f.lastName)||"",phone:((H=s.profile)==null?void 0:H.phone)||"",dateOfBirth:((G=s.profile)==null?void 0:G.dateOfBirth)||"",gender:((U=s.profile)==null?void 0:U.gender)||"",address:((_=s.profile)==null?void 0:_.address)||"",emergencyContact:((q=s.profile)==null?void 0:q.emergencyContact)||""})},[s]);const A=async()=>{o(!0);try{await t({firstName:l.firstName,lastName:l.lastName,phone:l.phone||void 0,dateOfBirth:l.dateOfBirth||void 0,gender:l.gender||void 0,address:l.address||void 0,emergencyContact:l.emergencyContact||void 0}),I.success("Profile updated successfully!"),n(!1)}catch{I.error("Failed to update profile")}finally{o(!1)}},P=r=>new Date(r).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"}),M=r=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(r),b=r=>{switch(r){case"completed":return"bg-green-700 text-green-300";case"pending":return"bg-yellow-700 text-yellow-300";case"failed":return"bg-red-700 text-red-300";case"attempted":return"bg-blue-700 text-blue-300";default:return"bg-gray-700 text-gray-300"}},w=(N=s==null?void 0:s.profile)!=null&&N.firstName?`${s.profile.firstName} ${s.profile.lastName||""}`.trim():void 0,x=w?`https://api.dicebear.com/7.x/adventurer/svg?seed=${encodeURIComponent(w)}`:void 0;return s?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"My Profile"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>n(!a),className:"w-full sm:w-auto px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:a?"Cancel":"Edit Profile"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 gap-y-8",children:[e.jsx(K,{glareEnable:!0,glareMaxOpacity:.35,glareColor:"#60a5fa",glarePosition:"all",scale:1.04,tiltMaxAngleX:12,tiltMaxAngleY:12,perspective:1200,className:"rounded-xl",children:e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative bg-gradient-to-br from-blue-700 via-purple-700 to-black rounded-xl p-8 text-white shadow-2xl overflow-hidden border-2 border-blue-500/40",children:[e.jsx("div",{className:"absolute -inset-2 rounded-xl bg-gradient-to-r from-blue-600 via-fuchsia-600 to-indigo-600 opacity-40 blur-2xl pointer-events-none"}),e.jsxs("div",{className:"relative z-10 text-center",children:[x&&e.jsx("img",{src:x,alt:"avatar",width:80,height:80,style:{borderRadius:"50%",boxShadow:"0 0 0 4px #1e293b"},className:"mb-4 mx-auto"}),e.jsxs("h3",{className:"text-2xl font-extrabold mb-1 tracking-tight drop-shadow-lg",children:[(L=s.profile)==null?void 0:L.firstName," ",(C=s.profile)==null?void 0:C.lastName]}),e.jsx("p",{className:"text-blue-200 capitalize mb-4 text-sm font-medium tracking-wide",children:(O=s.profile)==null?void 0:O.role}),e.jsxs("div",{className:"flex justify-center gap-8 mt-4",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"text-3xl font-extrabold text-yellow-400 drop-shadow-lg",children:(S=s.profile)==null?void 0:S.totalPoints}),e.jsx("div",{className:"text-xs text-blue-100",children:"Points"})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"text-3xl font-extrabold text-blue-300 drop-shadow-lg",children:(Y=s.profile)==null?void 0:Y.level}),e.jsx("div",{className:"text-xs text-blue-100",children:"Level"})]})]})]})]})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-gray-800 rounded-xl border border-gray-700 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-6",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"First Name"}),a?e.jsx("input",{type:"text",value:l.firstName,onChange:r=>d({...l,firstName:r.target.value}),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-xl text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("div",{className:"px-4 py-3 bg-gray-700 rounded-xl text-white",children:(k=s.profile)==null?void 0:k.firstName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Last Name"}),a?e.jsx("input",{type:"text",value:l.lastName,onChange:r=>d({...l,lastName:r.target.value}),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-xl text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("div",{className:"px-4 py-3 bg-gray-700 rounded-xl text-white",children:(z=s.profile)==null?void 0:z.lastName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Phone Number"}),a?e.jsx("input",{type:"tel",value:l.phone,onChange:r=>d({...l,phone:r.target.value}),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-xl text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("div",{className:"px-4 py-3 bg-gray-700 rounded-xl text-white",children:s.phone||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Date of Birth"}),a?e.jsx("input",{type:"date",value:l.dateOfBirth,onChange:r=>d({...l,dateOfBirth:r.target.value}),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-xl text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("div",{className:"px-4 py-3 bg-gray-700 rounded-xl text-white",children:((X=s.profile)==null?void 0:X.dateOfBirth)||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Gender"}),a?e.jsxs("select",{value:l.gender,onChange:r=>d({...l,gender:r.target.value}),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-xl text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Gender"}),e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"female",children:"Female"}),e.jsx("option",{value:"other",children:"Other"})]}):e.jsx("div",{className:"px-4 py-3 bg-gray-700 rounded-xl text-white capitalize",children:((D=s.profile)==null?void 0:D.gender)||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Student ID"}),e.jsx("div",{className:"mt-2 text-center",children:e.jsxs("div",{className:"font-mono text-xs bg-gray-800 rounded px-2 py-1 max-w-xs inline-block",title:($=s.profile)==null?void 0:$.userId,children:["Student ID: ",J((T=s.profile)==null?void 0:T.userId)]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Session ID"}),e.jsx("div",{className:"mt-2 text-center",children:e.jsxs("div",{className:"font-mono text-xs bg-gray-800 rounded px-2 py-1 max-w-xs inline-block mt-1",title:(R=s.profile)==null?void 0:R.sessionId,children:["Session: ",J((W=s.profile)==null?void 0:W.sessionId)]})})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Address"}),a?e.jsx("textarea",{value:l.address,onChange:r=>d({...l,address:r.target.value}),rows:3,className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-xl text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("div",{className:"px-4 py-3 bg-gray-700 rounded-xl text-white min-h-[80px]",children:((F=s.profile)==null?void 0:F.address)||"Not provided"})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Emergency Contact"}),a?e.jsx("input",{type:"text",value:l.emergencyContact,onChange:r=>d({...l,emergencyContact:r.target.value}),placeholder:"Name and phone number",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-xl text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("div",{className:"px-4 py-3 bg-gray-700 rounded-xl text-white",children:((B=s.profile)==null?void 0:B.emergencyContact)||"Not provided"})]}),a&&e.jsx("div",{className:"mt-6 flex gap-4",children:e.jsx(y.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:A,disabled:c,className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:c?e.jsxs(e.Fragment,{children:[e.jsx(j,{size:"sm",className:"mr-2"}),"Saving..."]}):"Save Changes"})})]})})]}),e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-gray-800 rounded-xl border border-gray-700 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-6",children:"Payment History"}),e.jsx("div",{className:"overflow-x-auto",children:p?p.length===0?e.jsx("div",{className:"text-center text-gray-400 py-8",children:"No payment history found."}):e.jsxs("table",{className:"w-full min-w-[600px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-gray-400 text-left",children:[e.jsx("th",{className:"p-3",children:"Date"}),e.jsx("th",{className:"p-3",children:"Sport/Batch"}),e.jsx("th",{className:"p-3",children:"Amount"}),e.jsx("th",{className:"p-3",children:"Status"}),e.jsx("th",{className:"p-3",children:"Method"}),e.jsx("th",{className:"p-3",children:"Receipt"})]})}),e.jsx("tbody",{children:p.map(r=>e.jsxs("tr",{className:"border-b border-gray-700 hover:bg-gray-700/50",children:[e.jsx("td",{className:"p-3 text-gray-300",children:P(r.createdAt)}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"text-gray-300",children:[e.jsx("div",{children:r.enrollment.sport.name}),e.jsx("div",{className:"text-sm text-gray-400",children:r.enrollment.batch.name})]})}),e.jsx("td",{className:"p-3 text-orange-400 font-bold",children:M(r.amount)}),e.jsxs("td",{className:"p-3",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${b(r.status)}`,children:r.status.charAt(0).toUpperCase()+r.status.slice(1)}),r.refunded&&e.jsx("div",{className:"text-xs text-red-400 mt-1",children:"Refunded"})]}),e.jsx("td",{className:"p-3 text-gray-300 capitalize",children:r.method}),e.jsx("td",{className:"p-3",children:r.receiptNumber?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-300 font-mono text-sm",children:r.receiptNumber}),e.jsx("button",{className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded text-xs disabled:opacity-50",disabled:h===r._id,onClick:async()=>{m(r._id);try{const{url:f}=await i({invoiceId:r._id});typeof f=="string"&&window.open(f,"_blank")}catch{I.error("Failed to download receipt")}finally{m(null)}},children:h===r._id?e.jsx(j,{size:"sm"}):"Download"})]}):e.jsx("span",{className:"text-gray-500",children:"-"})})]},r._id))})]}):e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx(j,{size:"lg"})})})]})]}):e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(j,{size:"lg"})})}export{ae as Profile,ae as default};
